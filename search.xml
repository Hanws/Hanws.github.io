<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Linux入门</title>
      <link href="/2022/04/11/Linux%E5%85%A5%E9%97%A8/"/>
      <url>/2022/04/11/Linux%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><img src="https://s1.ax1x.com/2022/04/13/LMRaPU.png" alt="LMRaPU.png"><br>Linux 是一种自由和开放源码的类 UNIX 操作系统。<br>其内核由林纳斯·本纳第克特·托瓦兹于1991年10月5日首次发布。<br>本教程,我将为大家介绍如何使用Linux。<br>Linux其实很容易学,相信你们能很快学会。<br>本教程将于 Linux 的发行版本 Centos 为例来为大家介绍 Linux 的使用</p><h3 id="Linux是开源的"><a href="#Linux是开源的" class="headerlink" title="Linux是开源的"></a>Linux是开源的</h3><p>Linux 遵循 GNU 通用公共许可证（GPL），任何个人和机构都可以自由地使用 Linux 的所有底层源代码，也可以自由地修改和再发布。<br>由于 Linux 是自由软件，任何人都可以创建一个符合自己需求的 Linux 发行版<br>目前主流的Linux版本有:</p><ul><li>Debian (及其派生版本Ubuntu、Linux Mint)</li><li>Fedora(及其相关版本Red Hat Enterprise Linux、CentOS)</li><li>Ubuntu</li><li>openSUSE</li><li>…..<h3 id="Linux的应用领域"><a href="#Linux的应用领域" class="headerlink" title="Linux的应用领域"></a>Linux的应用领域</h3>Linux作为企业级服务器的应用十分广泛，利用Linux系统可以为企业构架WWW服务器、数据库服务器、负载均衡服务器、邮件服务器、DNS服务器、代理服务器(透明网关)、路由器等，不但使企业降低了运营成本，同时还获得了Linux系统带来的高稳定性和高可靠性，且无须考虑商业软件的版权问题。<br>目前 Linux 不仅在家庭与企业中使用，并且在政府中也很受欢迎<h3 id="Linux的安装"><a href="#Linux的安装" class="headerlink" title="Linux的安装"></a>Linux的安装</h3></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Redhat认证系列之红帽认证系统管理员(RHCSA)</title>
      <link href="/2022/04/09/Redhat/"/>
      <url>/2022/04/09/Redhat/</url>
      
        <content type="html"><![CDATA[<h1 id="RHCSA考试"><a href="#RHCSA考试" class="headerlink" title="RHCSA考试"></a>RHCSA考试</h1><p>RHCSA的考试时间为3个钟头，考试环境有两台虚拟机，我这里用的是8版本的题目，RHCE8 版本和以往相比变动有还是比较大的。</p><hr><h1 id="在node1-net2-example-com-上做题"><a href="#在node1-net2-example-com-上做题" class="headerlink" title="在node1.net2.example.com 上做题"></a>在node1.net2.example.com 上做题</h1><h3 id="配置node1主机信息，使其具有以下网络配置："><a href="#配置node1主机信息，使其具有以下网络配置：" class="headerlink" title="配置node1主机信息，使其具有以下网络配置："></a>配置node1主机信息，使其具有以下网络配置：</h3><blockquote><p>主机名：node1.net2.example.com<br>IP地址：172.24.2.10<br>子网掩码：255.255.255.0<br>网关：172.24.2.254<br>名称服务器：172.24.2.254</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hostname <span class="comment"># 查看主机名与题目要求不同，用hostnamectl命令设置即可</span></span><br><span class="line">hostnamectl set-hostname node1.net2.example.com <span class="comment"># 设置为题目要求的主机名</span></span><br><span class="line">hostname <span class="comment"># 验证是否已经主机名已经设置为题目要求的主机名</span></span><br></pre></td></tr></table></figure><ol><li>tui字符界面图形模式配置   输入命令nmtui即可<img src="https://s1.ax1x.com/2022/04/10/LAitw4.png" alt="LAitw4.png"></li></ol><p>2.进入配置界面 <img src="https://s1.ax1x.com/2022/04/10/LAkVaQ.png" alt="LAkVaQ.png"><br>Edit a connection:编辑一个连接，可以添加或删除网络配置<br>Activate a connection:激活一个连接，可以启用或者禁用网络配置<br>Set system hostname:设置系统hostname<br>3. 选择网络接口 Edit编辑<img src="https://s1.ax1x.com/2022/04/10/LAEx54.png" alt="LAEx54.png"><br>4.  先把Automatic改成manual，再把光标定位到show上面回车键[<img src="https://s1.ax1x.com/2022/04/10/LAVURs.png" alt="LAVURs.png"><br>5.  再进行相关配置， 掩码直接在 IP地址后面添加  不然默认32位的，键盘操作：比如Adress后面的SHOW，把光标定位SHOW回车即可出现 IP地址配置，然后把 Automatically connect(自动连接)和Available to all users(适用于所有用户) 给X上(按空格键)，最后OK回到主界面<img src="https://s1.ax1x.com/2022/04/10/LAZr6I.png" alt="LAZr6I.png"><br>6.  光标右移，找到 Back 回车<img src="https://s1.ax1x.com/2022/04/10/LAZONF.png" alt="LAZONF.png"><br>7.  最后 quit 退出<img src="https://s1.ax1x.com/2022/04/10/LAZx39.png" alt="LAZx39.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection show <span class="comment"># 查看网卡</span></span><br><span class="line">nmcli connection up “你的网卡” <span class="comment"># 激活网卡</span></span><br><span class="line">ip a <span class="comment"># 查看你的ip地址是否设置成题目要求的</span></span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2022/04/10/LAu62Q.png" alt="LAu62Q.png"></p><h3 id="配置你的系统以使用默认存储库"><a href="#配置你的系统以使用默认存储库" class="headerlink" title="配置你的系统以使用默认存储库"></a>配置你的系统以使用默认存储库</h3><blockquote><p>在 node1 主机上配置 yum 仓库，并启动默认存储库<br>仓库地址：<a href="http://content.example.com/rhel8.2/x86_64/dvd/BaseOS">http://content.example.com/rhel8.2/x86_64/dvd/BaseOS</a> 和<br><a href="http://content.example.com/rhel8.2/x86_64/dvd/AppStream">http://content.example.com/rhel8.2/x86_64/dvd/AppStream</a><br>将以上两个存储库配置为系统的默认存储库。无需检查 GPG 签名</p></blockquote><p>解题步骤：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d <span class="comment"># 切换到yum仓库的配置文件</span></span><br><span class="line"><span class="built_in">ls</span> <span class="comment"># 看一看目录下面有没有文件，有文件的话 mv * /home/</span></span><br><span class="line">vim rhcsa.repo <span class="comment"># 只要以repo后缀结尾的就可以我这里以rhcsa为例子</span></span><br><span class="line">[baseos]</span><br><span class="line">name=baseos </span><br><span class="line">baseurl=http://content.example.com/rhel8.2/x86_64/dvd/BaseOS (这里写仓库地址，以实际地址为准)</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0 (无需检查GPG签名)</span><br><span class="line">[appstream]</span><br><span class="line">name=appstream</span><br><span class="line">baseurl=http://content.example.com/rhel8.2/x86_64/dvd/AppStream (同上)</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0 (无需检查GPG签名) </span><br></pre></td></tr></table></figure><ul><li><p>然后 ESC SHIFT加冒号 wq保存退出</p></li><li><p><strong>题目验证:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum repolist all <span class="comment"># 显示有你配置的两个仓库id和仓库名以及状态是enabled的就说明配置成功</span></span><br><span class="line">yum list <span class="comment"># 显示软件包的信息 </span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2022/04/10/LAJlVJ.png" alt="LAJlVJ.png"></p><h3 id="调试-SELinux"><a href="#调试-SELinux" class="headerlink" title="调试 SELinux"></a>调试 SELinux</h3><blockquote><p>非标准端口 82 上运行的 WEB 服务器在提供内容时遇到问题。根据需要调试并解决问题，<br>并使其满足以下条件：</p><ul><li>系统上的 web 服务器能够提供 &#x2F;var&#x2F;www&#x2F;html 中所有现在有的 html 文件（注意：不要删除或者</li><li>其他方式改动现有的文件内容）</li><li>Web 服务器通过 82 端口访问</li><li>Web 服务器在系统启动时自动启动</li></ul></blockquote></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart httpd <span class="comment"># 使用systemctl 命令重启 httpd.service。发现重启 httpd 服务报错</span></span><br><span class="line"><span class="comment"># 通过 systemctl restart httpd 命令的报错结果来看，使用 systemctl status httpd 和 journalctl -xe 命令可以查询报错的详细信息</span></span><br><span class="line">journalctl -xe </span><br><span class="line"><span class="comment"># 通过查询信息得出，使用 semanage port -a -t PORT_TYPE -p tcp 82 可以解决报错</span></span><br><span class="line">semanage port -l | grep http <span class="comment"># 使用 semanage 命令查找适合端口 82/TCP 的端口类型</span></span><br><span class="line">semanage port -a -t http_port_t -p tcp 82 <span class="comment"># 使用 semanage 命令为端口 82/TCP 分配 http_port_t 类型</span></span><br><span class="line">systemctl restart httpd <span class="comment"># 使用 systemctl 命令重启 httpd.service 服务。此命令应该会成功</span></span><br><span class="line">systemctl status httpd <span class="comment"># 查询 httpd 服务状态</span></span><br><span class="line">curl 172.24.2.10:82 <span class="comment"># 检查你现在是否可以访问在端口 82/TCP 上运行的 Web 服务器。使用 curl 命令从 node1 访问Web 服务</span></span><br><span class="line">firewall-cmd --permanent --add-port=82/tcp <span class="comment"># 在node1上，打开防火墙上的端口 82/TCP，使用 firewall-cmd 命令，在 node1 的防火墙默认区域的永久配置中打开端口 82/TCP</span></span><br><span class="line">firewall-cmd --reload <span class="comment"># 在 node1 上激活防火墙更改</span></span><br><span class="line">最后在node2和物理机分别curl一下访问web服务，验证能不能访问成功</span><br></pre></td></tr></table></figure><h3 id="创建用户账户和配置用户账户"><a href="#创建用户账户和配置用户账户" class="headerlink" title="创建用户账户和配置用户账户"></a>创建用户账户和配置用户账户</h3><blockquote><p>创建下列用户、用户组，并按要求完成设置：</p><ul><li>创建名为 sysmgrs 的阻</li><li>创建用户 natasha，其作为次要组从属于 sysmgrs</li><li>创建用户 harry，其作为次要组从属于 sysmgrs</li><li>创建用户 sarah ，其无权访问系统上的交互式 shell，且不是 sysmgrs 组的成员</li><li>natasha、harry、sarah 的密码是 ablerate</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">groupadd sysmgrs <span class="comment"># 创建sysmgrs组</span></span><br><span class="line">useradd -G sysmgrs natasha <span class="comment"># 创建 natasha用户,并设置附属组为 sysmgrs</span></span><br><span class="line">useradd -G sysmgrs harry <span class="comment"># 创建用户harry，并设置附属组为sysmgrs</span></span><br><span class="line">useradd -s /sbin/nologin sarah <span class="comment"># 创建用户sarah,并执行shell类型为/sbin/nologin</span></span><br><span class="line"><span class="built_in">echo</span> ablerate | passwd --stdin natasha <span class="comment"># 设置用户密码</span></span><br><span class="line"><span class="built_in">echo</span> ablerate | passwd --stdin harry <span class="comment"># 设置用户密码</span></span><br><span class="line"><span class="built_in">echo</span> ablerate | passwd --stdin sarah <span class="comment"># 设置用户密码</span></span><br></pre></td></tr></table></figure><h3 id="配置-cron-作业"><a href="#配置-cron-作业" class="headerlink" title="配置 cron 作业"></a>配置 cron 作业</h3><blockquote><p>配置 cron 作业，该作业每隔 1 分钟执行以下命令：logger “hello rhcsa”，以用户natasha身份行<br>配置 cron 作业，该作业每隔 1 分钟执行以下命令：logger “hello rhcsa”，以用户natasha身份行<br>配置 cron 作业，每天的 14:23 分执行以下命令：logger “hello rhcsa”，以用户natasha身份运行</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">crontab -e -u natasha (以natasha用户的身份去编辑cron作业)</span><br><span class="line"><span class="comment"># */2 * * * * logger &quot;hello rhcsa&quot; (每隔两分钟执行) </span></span><br><span class="line"><span class="comment"># */1 * * * * logger &quot;hello rhcsa&quot; (每隔一分钟执行)</span></span><br><span class="line"><span class="comment"># 23 14 * * * logger &quot;hello rhcsa&quot; (每天的14点23分执行)</span></span><br><span class="line"><span class="comment"># * * * * * 对应的是 分 时 日 月 周</span></span><br><span class="line">crontab -l -u natasha <span class="comment"># 验证是否有题目中要求的cron作业</span></span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2022/04/11/LZ9m59.png" alt="LZ9m59.png"></p><h3 id="创建协作目录"><a href="#创建协作目录" class="headerlink" title="创建协作目录"></a>创建协作目录</h3><blockquote><p>创建具有以下特征的协作目录 &#x2F;home&#x2F;managers 要求如下:</p><ul><li>&#x2F;home&#x2F;managers 的组用权是 sysmgrs</li><li>目录应当可被 sysmgrs 的成员读取。写入和访问，但任何其他用户不具这些权限。（当然，root      用户有权访问系统上的所有文件和目录）</li><li>&#x2F;home&#x2F;managers 中创建的文件自动将组所有权设置到 sysmgrs 组</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /home/managers <span class="comment"># 创建目录</span></span><br><span class="line"><span class="built_in">chgrp</span> sysmgrs /home/managers <span class="comment"># 设置/home/managers所有组为sysmgrs组</span></span><br><span class="line"><span class="built_in">chmod</span> g+s /home/managers <span class="comment"># 给目录增加特殊权限</span></span><br><span class="line"><span class="built_in">chmod</span> u=rwx,g=rwx,o=--- /home/managers <span class="comment"># 设置所有者、所属组、其他用户的权限</span></span><br><span class="line"><span class="built_in">touch</span> /home/managers/file1 </span><br><span class="line">ll /home/managers/file1 </span><br><span class="line"><span class="comment"># 使用root用户在 /home/managers 目录下创建file1文件，因为 /home/managers 添加了 sgid 特殊权限，所以 虽然是root用户创建的file1，但是file1的所属组并不是root组，而是继承了/home/managers目录，所属组为sysmgrs组</span></span><br></pre></td></tr></table></figure><h3 id="配置NTP-时间同步"><a href="#配置NTP-时间同步" class="headerlink" title="配置NTP 时间同步"></a>配置NTP 时间同步</h3><blockquote><p>配置您的系统使其成为materials.example.com的NTP客户端。(注:materials.example.com是classroom.example.com 的 DNS 别名)</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">timedatectl <span class="comment"># 查看当前时间同步信息</span></span><br><span class="line">systemctl status chronyd <span class="comment"># 查看时间同步服务状态</span></span><br><span class="line">systemctl start chronyd <span class="comment"># 启动时间同步服务</span></span><br><span class="line">systemctl <span class="built_in">enable</span> chronyd <span class="comment"># 且设置成开机自启动</span></span><br><span class="line">vim /etc/chrony.conf <span class="comment"># 编辑 /etc/chrony.conf 文件，将 materials.example.com 服务器指定为NTP时间源</span></span><br><span class="line"><span class="comment"># 添加server materials.example.com iburst 包括可加快初始时间同步的 iburst 选项</span></span><br><span class="line">systemctl restart chronyd <span class="comment"># 重启时间同步服务，使参数生效</span></span><br><span class="line">timedatectl <span class="comment"># 验证,如下图划线的yes和active一定要都有</span></span><br><span class="line">chronyc sources -v <span class="comment"># 验证配置参数是否正确</span></span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2022/04/11/LZAkK1.png" alt="LZAkK1.png"><br><img src="https://s1.ax1x.com/2022/04/11/LZAcIU.png" alt="LZAcIU.png"><br><img src="https://s1.ax1x.com/2022/04/11/LZVs4U.png" alt="LZVs4U.png"></p><h3 id="配置-autofs"><a href="#配置-autofs" class="headerlink" title="配置 autofs"></a>配置 autofs</h3><blockquote><p>配置 autofs ，以按照如下所述自动挂载远程用户的主目录:</p><ul><li>materials.example.com ( 172.24.2.10 ) NFS 导出 &#x2F;rhome 到您的系统。此文件系统包含为用户 remoteuser1 预配置的主目录.</li><li>remoteuser1 的主目录是 materials.example.com:&#x2F;rhome&#x2F;remoteuser1 </li><li>remoteuser1 的主目录应自动挂载到本地 &#x2F;rhome 下的 &#x2F;rhome&#x2F;remoteuser1</li><li>主目录必须可供其用户写入</li><li>remoteuser1 的密码是 ablerate</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yum -y install autofs <span class="comment"># 安装autofs软件包</span></span><br><span class="line">systemctl start autofs <span class="comment"># 启动antofs服务</span></span><br><span class="line">systemctl <span class="built_in">enable</span> autofs <span class="comment"># 设置成开机自启动</span></span><br><span class="line">systemctl status autofs <span class="comment"># 查看一下状态</span></span><br><span class="line">vim /etc/auto.master <span class="comment"># 编辑/etc/auto.master的映射文件 </span></span><br><span class="line"><span class="comment"># 添加/rhome /etc/auto.hzh auto.后面可以自己定义</span></span><br><span class="line">vim /etc/auto.hzh <span class="comment"># 创建一个名为 /etc/auto.hzh 的映射文件 </span></span><br><span class="line"><span class="comment"># 添加remoteuser1 -fstype=nfs4,rw materials.example.com:/rhome/remoteuser1</span></span><br><span class="line">systemctl restart autofs <span class="comment"># 重新启动autofs服务</span></span><br><span class="line">su - remoteuser1 <span class="comment"># 验证</span></span><br><span class="line"><span class="comment"># 切换到 remoteuser1 用户 df -TH 看一看是不是成功挂载 </span></span><br></pre></td></tr></table></figure><p>添加&#x2F;rhome &#x2F;etc&#x2F;auto.hzh 并保存退出<img src="https://s1.ax1x.com/2022/04/11/LZ8WKf.png" alt="LZ8WKf.png"><br>添加用户、权限、主目录，并保存退出 <img src="https://s1.ax1x.com/2022/04/11/LZ8hqS.png" alt="LZ8hqS.png"><br>切换到remoteuser1用户然后验证是否挂载成功<img src="https://s1.ax1x.com/2022/04/11/LZ8lbF.png" alt="LZ8lbF.png"></p><h3 id="配置文件权限"><a href="#配置文件权限" class="headerlink" title="配置文件权限"></a>配置文件权限</h3><blockquote><p>将文件 &#x2F;etc&#x2F;fstab 复制到 &#x2F;var&#x2F;tmp&#x2F;fstab 。配置 &#x2F;var&#x2F;tmp&#x2F;fstab 的权限以满足如下条件：</p><ul><li>文件 &#x2F;var&#x2F;tmp&#x2F;fstab 所有者为root</li><li>文件 &#x2F;var&#x2F;tmp&#x2F;fstab 所属组为root </li><li>文件 &#x2F;var&#x2F;tmp&#x2F;fstab 应不能被任何人执行</li><li>用户 natasha 能够读取和写入 &#x2F;var&#x2F;tmp&#x2F;fstab  </li><li>用户 harry 无法写入或读取 &#x2F;var&#x2F;tmp&#x2F;fstab</li><li>所有其他用户（当前或未来）能够读取 &#x2F;var&#x2F;tmp&#x2F;fstab</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> -av /etc/fstab /var/tmp/fstab</span><br><span class="line">setfacl -m u:natasha:rw- /var/tmp/fstab</span><br><span class="line">setfacl -m u:harry:--- /var/tmp/fstab</span><br><span class="line"><span class="comment"># 设置特殊权限 /var/tmp/fstab</span></span><br><span class="line">getfacl /var/tmp/fstab <span class="comment"># 验证权限</span></span><br></pre></td></tr></table></figure><h3 id="配置用户帐户"><a href="#配置用户帐户" class="headerlink" title="配置用户帐户"></a>配置用户帐户</h3><blockquote><p>创建用户账户 alex，用户的 ID 为 1234，此用户的密码应当为 thuctive</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useradd -u 1234 alex <span class="comment"># 创建用户alex并设置用户的ID为1234</span></span><br><span class="line"><span class="built_in">echo</span> thuctive | passwd --stdin alex <span class="comment"># 设置密码</span></span><br><span class="line"><span class="built_in">id</span> alex <span class="comment"># 验证一下</span></span><br></pre></td></tr></table></figure><h3 id="查找文件"><a href="#查找文件" class="headerlink" title="查找文件"></a>查找文件</h3><blockquote><p>查找属于 jacques 用户所属的文件，并拷贝到 &#x2F;root&#x2F;findfiles 目录</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">mkdir</span> /root/findfiles <span class="comment"># 创建目录</span></span><br><span class="line"> find / -user jacques -<span class="built_in">exec</span> <span class="built_in">cp</span> -avp &#123;&#125; /root/findfiles/ \;</span><br><span class="line"> <span class="comment"># 查找用户jacques用户的文件，并拷贝到 /root/findfiles 目录</span></span><br><span class="line"><span class="built_in">cd</span> /root/findfiles <span class="comment"># 切换到目录看一看有没有所属jacques的文件</span></span><br></pre></td></tr></table></figure><h3 id="查找字符串"><a href="#查找字符串" class="headerlink" title="查找字符串"></a>查找字符串</h3><blockquote><p>查找文件 &#x2F;usr&#x2F;share&#x2F;xml&#x2F;iso-codes&#x2F;iso_639_3.xml 中包含字符串 ng 的所有行。将所有这些行的副本按原始顺序放在文件 &#x2F;root&#x2F;list 中。 &#x2F;root&#x2F;list 不得包含空行，且所有行必须是 &#x2F;usr&#x2F;share&#x2F;xml&#x2F;iso-codes&#x2F;iso_639_3.xml 中原始行的确切副本。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /usr/share/xml/iso-codes/iso_639_3.xml | grep ng | grep -v <span class="string">&quot;^$&quot;</span> &gt;&gt; /root/list</span><br><span class="line"><span class="comment"># grep -v &quot;^$&quot; 表示去除空格，&gt;&gt; 双大于号表示重定向</span></span><br><span class="line"><span class="built_in">cat</span> /root/list <span class="comment"># 验证</span></span><br></pre></td></tr></table></figure><h3 id="创建存档"><a href="#创建存档" class="headerlink" title="创建存档"></a>创建存档</h3><blockquote><p>创建一个名为 &#x2F;root&#x2F;backup.tar.gz 的 tar 存档，其应包含 &#x2F;usr&#x2F;local 的 tar 存档，其应包含 &#x2F;usr&#x2F;local 的内容。该 tar 存档必须使用 gzip 进行压缩。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar zcvf /root/backup.tar.bz2 /usr/local</span><br><span class="line">tar jcvf /root/backup.tar.bz2 /usr/local</span><br><span class="line">tar Jcvf /root/backup.tar.xz /usr/local</span><br><span class="line"><span class="comment"># j 表示 bzip2 压缩格式、J 表示 xz 压缩格式，z 表示 gz 压缩格式</span></span><br></pre></td></tr></table></figure><h3 id="设置密码策略-有效期"><a href="#设置密码策略-有效期" class="headerlink" title="设置密码策略(有效期)"></a>设置密码策略(有效期)</h3><blockquote><p>设置密码策略(有效期)</p><p>所有 node1 上的新本地用户所使用的密码都应该在 20 天后过期</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/login.defs <span class="comment"># 编辑密码策略配置文件 /etc/login.defs，修改 PASS_MAX_DAYS 参数</span></span><br><span class="line">useradd rhcsa <span class="comment"># 新创建一个用户来验证</span></span><br><span class="line">chage -l rhcsa <span class="comment"># 查看新创建的用户 rhcsa 密码策略，是不是 20 天以后过期</span></span><br></pre></td></tr></table></figure><p>编辑配置文件，修改 PASS_MAX_DAYS 参数 为题目要求的<img src="https://s1.ax1x.com/2022/04/12/LmVP7q.png" alt="LmVP7q.png"><br>查看新创建的用户 rhcsa 密码策略，是不是 20 天以后过期<img src="https://s1.ax1x.com/2022/04/12/LmkktO.png" alt="LmkktO.png"></p><h3 id="配置组特权（sudo）"><a href="#配置组特权（sudo）" class="headerlink" title="配置组特权（sudo）"></a>配置组特权（sudo）</h3><blockquote><p>给 sysmgrs 组设置 sudo 特权，使其组中的用户都可以使用 sudo 命令执行<br>管理命令，并且进行 sudo 时不需要密码</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/sudoers | grep wheel  <span class="comment"># 查询配置参数</span></span><br><span class="line">visudo <span class="comment"># 修改/etc/sudoers配置文件</span></span><br><span class="line"><span class="comment"># 为什么不直接 vim，因为 /etc/sudoers 权限是 440，如果 vim 先把 /etc/sudoers 文件权限设置一下</span></span><br><span class="line">添加配置参数 %sysmgrs ALL=(ALL) ALL   %sysmgrs ALL=(ALL) NOPASSWD: ALL</span><br><span class="line">su - natasha <span class="comment"># 切换到sysmgrs这个组里的一个用户</span></span><br><span class="line">sudo <span class="built_in">cat</span> /etc/shadow 验证sudo权限</span><br></pre></td></tr></table></figure><p>找到Allows people in group wheel to run all commands(允许组轮中的人运行所有命令)</p><p>添加 %sysmgrs ALL&#x3D;(ALL) ALL<img src="https://s1.ax1x.com/2022/04/13/LKMhb8.png" alt="LKMhb8png"></p><p>找到Same thing without a password (没有密码也是一样) 添加%sysmgrs ALL&#x3D;(ALL) NOPASSWD: ALL <img src="https://s1.ax1x.com/2022/04/13/LKQwzn.png" alt="LKQwznpng"></p><h1 id="在node2-net2-example-com-上做题"><a href="#在node2-net2-example-com-上做题" class="headerlink" title="在node2.net2.example.com 上做题"></a>在node2.net2.example.com 上做题</h1><h3 id="设置-root-密码"><a href="#设置-root-密码" class="headerlink" title="设置 root 密码"></a>设置 root 密码</h3><blockquote><p>将 node2 主机的 root 的密码设置成 ablerate，你需要获得系统访问权限才能进行此操作</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">开机导航页面按e &gt;linux行尾加上rd.break &gt; ctrl x 使用修改后的配置进行启动</span><br><span class="line">mount -o rw,remount /sysroot</span><br><span class="line"><span class="built_in">chroot</span> /sysroot</span><br><span class="line"><span class="built_in">echo</span> flectrag | passwd --stdin root</span><br><span class="line"><span class="built_in">touch</span> /.autorelabel</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure><p>开机导航页面按e<img src="https://s1.ax1x.com/2022/04/15/L3OiE6.png" alt="L3OiE6png"></p><p>Linux尾行加 rd.break(前面一定要加空格) 然后ctrl x启动<img src="https://s1.ax1x.com/2022/04/15/L3OIPO.png" alt="L3OIPOpng"></p><p>输入代码 最后再输入两次exit退出<img src="https://s1.ax1x.com/2022/04/15/L3XoT0.png" alt="L3XoT0png"></p><h3 id="配置你的系统以使用默认存储库-1"><a href="#配置你的系统以使用默认存储库-1" class="headerlink" title="配置你的系统以使用默认存储库"></a>配置你的系统以使用默认存储库</h3><blockquote><p>在 node2 主机上配置 yum 仓库，并启动默认存储库<br>仓库地址：<a href="http://rhgls.domain8.example.com/BaseOS">http://rhgls.domain8.example.com/BaseOS</a> 和<br><a href="http://rhgls.domain8.example.com/AppStream">http://rhgls.domain8.example.com/AppStream</a><br>将以上两个存储库配置为系统的默认存储库。无需检查 GPG 签名</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d</span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">vim rhcsa.repo</span><br><span class="line">[baseos]</span><br><span class="line">name=baseos </span><br><span class="line">baseurl=http://rhgls.domain8.example.com/BaseOS(这里写仓库地址，以实际地址为准)</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0 (无需检查GPG签名)</span><br><span class="line">[appstream]</span><br><span class="line">name=appstream</span><br><span class="line">baseurl=http://rhgls.domain8.example.com/AppStream</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0 (无需检查GPG签名)</span><br></pre></td></tr></table></figure><p>本题与node1第二题相同,具体解释请参考<a href="https://www.hzh.best/2022/04/09/Redhat/#%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%E7%B3%BB%E7%BB%9F%E4%BB%A5%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E5%AD%98%E5%82%A8%E5%BA%93">node1</a></p><h3 id="调整逻辑卷大小"><a href="#调整逻辑卷大小" class="headerlink" title="调整逻辑卷大小"></a>调整逻辑卷大小</h3><blockquote><ul><li><p>将逻辑卷 vo 及其文件系统的大小调整到 230 MiB 确保文件系统内容保持不变</p></li><li><p>注：分区大小很少与请求的大小完全相同，因此可以接受范围为 217 MiB 到 243 MiB 的大小</p></li><li><p>根据逻辑卷分区的文件系统类型，分别使用不同的刷新命令</p><p>vfat、ext2、ext3、ext4 等文件系统使用 resize2fs xfs 文件系统使用 xfs_grwofs</p></li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lvextend -L 230M /dev/myvol/vo</span><br><span class="line">blkid  <span class="comment"># 看一下文件系统类型，这里我拿 ext4 的文件类型来距离</span></span><br><span class="line">resize2fs /dev/myvol/vo  <span class="comment"># 刷新</span></span><br><span class="line"><span class="built_in">df</span> -TH  <span class="comment"># 验证逻辑卷分区挂载信息</span></span><br></pre></td></tr></table></figure><h3 id="磁盘部分"><a href="#磁盘部分" class="headerlink" title="磁盘部分"></a>磁盘部分</h3><p><strong>注意:</strong></p><ul><li><strong>我们考试的时候有vda、vdb、vdc 三块磁盘，通过lsblk命令查询 发现</strong></li><li><strong>vda 磁盘空间全部划分完毕</strong></li><li><strong>vdb 目前只划分了两个分区(主分区) ，还可以分两个主分区</strong></li><li><strong>vdc没有任何分区，作为创建vdo卷的磁盘</strong><h3 id="添加交换分区"><a href="#添加交换分区" class="headerlink" title="添加交换分区"></a>添加交换分区</h3></li></ul><blockquote><p>向您的系统添加一个额外的交换分区 756MiB 交换分区应在系统启动时自动挂载。不要删除或以任何方式改动系统上的任何现有交换分区。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">lsblk <span class="comment"># 通过查询分区情况，所以我们用第二块磁盘vdb</span></span><br><span class="line">fdisk /dev/vdb  <span class="comment"># 创建新分区 具体创建请看下图</span></span><br><span class="line">lsblk  <span class="comment"># 查询新创建的分区信息</span></span><br><span class="line">mkswap /dev/vd3  <span class="comment"># 给新创建的分区,分配文件系统(格式化)</span></span><br><span class="line">vim /etc/fstab <span class="comment"># 将挂载条目写到/etc/fstab 文件中</span></span><br><span class="line"><span class="comment"># /dev/vd3 swap swap defaults 0 0 </span></span><br><span class="line">free -m  <span class="comment"># 查看当前交换分区大小</span></span><br><span class="line">swapon -a  <span class="comment"># 激活交换分区 这一步命令一定要验证,如果报错,挂载一定写错了</span></span><br><span class="line">free -m  <span class="comment"># 检查激活后的交换分区</span></span><br></pre></td></tr></table></figure><p>创建新分区具体步骤:</p><p>fdisk &#x2F;dev&#x2F;vdb 之后我们进入到这个界面，p 然后敲Enter 打印看一看创建了几个分区<img src="https://s1.ax1x.com/2022/04/15/LGllse.png" alt="LGllsepng"></p><p>n 加 Enter 创建 接着下图里面根据英文显示已经创建了两个主分区，0个拓展分区，剩余两个主分区 这里我们直接按 Enter 默认创建主分区<img src="https://s1.ax1x.com/2022/04/15/LG1g7d.png" alt="LG1g7dpng"></p><p>显示 Partition number 分区号 我们这里还是直接按 Enter键<img src="https://s1.ax1x.com/2022/04/15/LG3CB4.png" alt="LG3CB4png"></p><p>显示 First sector (2095106-8388607, default 2097152) 这里我们还是直接敲 Enter 选择默认的<img src="https://s1.ax1x.com/2022/04/15/LG3CB4.png" alt="LG3CB4png"></p><p>接着我们根据题目描述创建一个大小为756MB 这里我们敲 +756M 然后 Enter <img src="https://s1.ax1x.com/2022/04/15/LG8URx.png" alt="LG8URxpng"> </p><p>然后我们 p在打印看一下创建是否成功<img src="https://s1.ax1x.com/2022/04/15/LG8fQf.png" alt="LG8fQfpng"></p><p>接着我们发现，我们创建出来的vdb3磁盘对于的type类型为Linux，我们要改成swap类型的</p><p><img src="https://s1.ax1x.com/2022/04/15/LGGpTJ.png" alt="LGGpTJpng"></p><p>我们敲 t 然后Enter <img src="https://s1.ax1x.com/2022/04/15/LGtRAg.png" alt="LGtRAg.png"></p><p>接着我们到Partition number 这一行直接敲Enter<img src="https://s1.ax1x.com/2022/04/15/LGGakj.png" alt="LGGakjpng"></p><p>在Hex code (type L to list all codes) 这一行敲 l <img src="https://s1.ax1x.com/2022/04/15/LGG51x.png" alt="LGG51xpng">找到swap类型对应的编号，我这里是82，输入82 敲Enter<img src="https://s1.ax1x.com/2022/04/15/LGJSjf.png" alt="LGJSjfpng"></p><p>接着 p打印一下，验证类型是不是更改成功<img src="https://s1.ax1x.com/2022/04/15/LGNuKP.png" alt="LGNuKP.png"></p><p>最后 wq 保存退出<img src="file://C:\Users\HZH\AppData\Roaming\marktext\images\2022-04-15-20-47-08-image.png?msec=1650027225486"></p><p>将新创建的磁盘格式化成swap类型<img src="https://s1.ax1x.com/2022/04/15/LGJWqS.png" alt="LGJWqSpng"></p><p>把路径复制将挂载条目写在&#x2F;etc&#x2F;fstab&#x2F;里面<img src="https://s1.ax1x.com/2022/04/15/LGYVde.png" alt="LGYVdepng"></p><p>最后swapon -a 和 free -m 验证一下即可</p>]]></content>
      
      
      <categories>
          
          <category> Redhat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Redhat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>哈哈👋🏻</title>
      <link href="/2022/04/09/%E5%93%88%E5%93%88/"/>
      <url>/2022/04/09/%E5%93%88%E5%93%88/</url>
      
        <content type="html"><![CDATA[<p>大家好，我是Hanws😂,你们可能是通过我的网名 [被驴踢过的脑袋还好使吗] 认识我的，我的特点有:</p><ul><li>理想主义</li><li>有点努力</li><li>会点技术</li><li>接受过义务教育的义务教育漏网之鱼</li><li>LSP</li></ul><p>这是我第一次开始写博客，之前有这个想法但是一直没有实施，这个博客是由<a href="https://hexo.io/">Hexo</a>搭建出来的，它是一个快速、简单、强大的博客框架。</p><p>为什么非要写博客？唉，就是玩！😅  大概是因为这样:</p><blockquote><p>我不是程序员，也不是设计师，我只是恰好有一些想法和一台电脑。</p></blockquote><p>没错就是🧠里经常产生想法，无论是技术的还是生活的，也无论是熟悉的领域还是，不熟悉的领域的，时间久了，有些想法还是会重复出现，所以尝试着将这些想法记录下来，可能是一种解脱。不过，以后我会经常来记录一些技术学习总结，以及我自己的一些思考，小到技术大到宇宙。</p><hr><p>希望大佬轻点喷😣</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
