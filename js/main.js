var html,mask,mobileNav;function RunTime(){const e=$query(".runtime");var o;e&&(o=e.getAttribute("publish-date"),o=(Date.now()-new Date(o).getTime())/864e5,e.innerText=parseInt(o)||1)}function addCodeBlock(){$queryAll("figure.highlight").forEach(function(e){var o="plaintext"==(o=e.classList[1])?"code":o;e.insertAdjacentHTML("afterbegin",`<div class='code-block' lang='${o}'>
            <span class='clipboard'><i class='fa fa-clipboard'></i></span>
        </div>`)})}function tableWrap(){$queryAll(".post-content>table,.content>table").forEach(function(e){wrap(e,"div",null,"table-wrap")})}function fancyboxFn(){getScript($config.CDN.fancyboxJs,function(){const e=$queryAll(".post-content img");e.forEach(e=>e.setAttribute("data-fancybox",""));var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=$config.CDN.fancyboxCss,document.head.appendChild(o)})}function codeBlockExpand(){if($config.codeBlockExpand&&$config.codeBlockExpand.enable){for(var e=$queryAll("figure.highlight"),a=$config.codeBlockExpand.height,o=0;o<e.length;o++)e[o].clientHeight>a&&(e[o].style="max-height: "+a+"px",e[o].insertAdjacentHTML("beforeend",'<div class="show-btn"><i class="fas fa-angle-down"></i></div>'));$queryAll(".show-btn").forEach(function(n){n.onclick=function(){var e,o,t=n.childNodes[0];"fas fa-angle-down"==t.className?(t.classList.remove("fa-angle-down"),t.classList.add("fa-angle-up"),n.parentNode.style=""):(t.classList.remove("fa-angle-up"),t.classList.add("fa-angle-down"),n.parentNode.style="max-height: "+a+"px",n.previousElementSibling.style="",scrollTop=document.documentElement.scrollTop||document.body.scrollTop,t=n.getBoundingClientRect().bottom+scrollTop,e=$config.codeBlockExpand.height,o=$config.codeBlockExpand.scrollTop,window.scrollTo(0,t-e-o))}})}}function openMobile(){var e=$query(".open-nav");e&&(e.onclick=function(){mobileNav.classList.contains("open-mobile")||(mobileNav.className="open-mobile",mask.className="mask")})}function showToc(){var e=$id("open-toc"),o=$id("toc-wrap");e&&o&&(e.onclick=function(){o.classList.contains("show-toc")?o.classList.remove("show-toc"):o.classList.add("show-toc")})}function closeAll(){var e=$id("local-search");e&&(e.classList.remove("search-animation-max"),e.classList.add("search-animation-min"),setTimeout(function(){e.style.display=""},500)),html.style.overflow="auto",mobileNav.classList.remove("open-mobile"),mobileNav.style.opacity="",mask.className=""}function DarkMode(){var e,o,t;$id("darkmode")&&(e=document.getElementsByTagName("body")[0],o=$id("darkmode"),t=$query("#darkmode i"),"true"===localStorage.isDark?(html.setAttribute("theme","dark"),t.classList.remove("fa-moon"),t.classList.add("fa-sun")):(html.removeAttribute("theme"),t.classList.remove("fa-sun"),t.classList.add("fa-moon")),o.onclick=function(){"true"!==localStorage.isDark?(localStorage.isDark="true",e.style="transition: all .3s linear",html.setAttribute("theme","dark"),t.classList.remove("fa-moon"),t.classList.add("fa-sun")):(localStorage.isDark="false",e.style="transition: all .3s linear",html.removeAttribute("theme"),t.classList.remove("fa-sun"),t.classList.add("fa-moon"))})}function scroll(){var i=0;window.addEventListener("scroll",function(){var e=document.documentElement.clientHeight,o=window.scrollY||document.documentElement.scrollTop,t=$query(".navbar"),n=$id("toc"),a=$id("sidebar-sticky"),l=(i=(i<o?(n&&(n.style.top=""),a&&(a.style.top=""),t.style.transform="translateY(-60px)"):(n&&(n.style.top="70px"),a&&(a.style.top="70px"),t.style.transform=""),o),$query("#rightside")),n=(100<o?l.style="opacity:1;visibility:visible":(l.style.opacity=0,setTimeout(function(){l.style.visibility="hidden"},500)),$query(".post-content")),a=$query(".num");n&&a&&(t=n.offsetTop,n=e<(n=n.clientHeight)?n-e:document.documentElement.scrollHeight-e,e=Math.round(100*((o-t)/n)),a.innerText=(o=100<e?100:e<=0?0:e)+"%",$query(".progress").value=o)})}function codeCopy(){$queryAll("figure.highlight").forEach(function(o){var t=o.firstChild.childNodes[1];t.onclick=function(){var e=window.getSelection();e.selectAllChildren(o.querySelector(".code")),document.execCommand("copy"),e.removeAllRanges(),t.innerHTML='<i class="fa fa-check" style="color:green"></i>',setTimeout(function(){t.innerHTML='<i class="fa fa-clipboard"></i>'},2e3)}})}function exeAllFn(){html=document.getElementsByTagName("html")[0],mask=$id("mask"),mobileNav=$id("mobile-nav"),RunTime(),addCodeBlock(),tableWrap(),fancyboxFn(),codeBlockExpand(),openMobile(),showToc(),closeAll(),DarkMode(),scroll(),codeCopy()}window.onload=exeAllFn;